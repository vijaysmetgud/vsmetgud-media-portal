<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>VSMETGUD MEDIA PORTAL</title>

<script src="https://cdn.jsdelivr.net/npm/particles.js"></script>

<style>

/* ================= GLOBAL ================= */

body {
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:#0f172a;
    color:#e2e8f0;
    overflow-x:hidden;
    transition:0.4s;
}

body.light {
    background:#f1f5f9;
    color:#0f172a;
}

#particles-js {
    position:fixed;
    width:100%;
    height:100%;
    z-index:-2;
}

/* ================= HERO ================= */

header {
    text-align:center;
    padding-top:120px;
    padding-bottom:40px;
    margin-left:280px;
}

header h1 {
    font-size:70px;
    font-weight:700;
    background:linear-gradient(90deg,#38bdf8,#22c55e);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}

/* ================= BUTTONS ================= */

.navbar {
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:15px;
    padding:20px;
    margin-left:280px;
}

.nav-btn {
    padding:12px 22px;
    border:none;
    border-radius:30px;
    cursor:pointer;
    background:linear-gradient(135deg,#2563eb,#1d4ed8);
    color:white;
    font-size:14px;
    transition:0.3s;
}

.nav-btn:hover {
    transform:scale(1.08);
    box-shadow:0 8px 25px rgba(37,99,235,0.8);
}

/* ACTIVE BUTTON */
.nav-btn.active {
    background:linear-gradient(135deg,#22c55e,#16a34a);
    animation:pulse 1.5s infinite;
}

@keyframes pulse {
    0% { box-shadow:0 0 10px #22c55e; }
    50% { box-shadow:0 0 30px #22c55e; }
    100% { box-shadow:0 0 10px #22c55e; }
}

/* ALERT BADGE */
.alert-badge {
    background:red;
    color:white;
    font-size:10px;
    padding:3px 6px;
    border-radius:20px;
    margin-left:6px;
}

/* ================= METRICS ================= */

.metrics {
    position:fixed;
    left:20px;
    top:200px;
    width:240px;
    background:rgba(30,41,59,0.9);
    backdrop-filter:blur(15px);
    padding:25px;
    border-radius:20px;
    box-shadow:0 15px 50px rgba(0,0,0,0.6);
}

.metric { margin-bottom:25px; }

.counter {
    font-size:28px;
    font-weight:bold;
    color:#22c55e;
}

/* ================= THEME TOGGLE ================= */

.theme-toggle {
    position:fixed;
    top:20px;
    right:20px;
    background:#2563eb;
    padding:10px 18px;
    border-radius:30px;
    cursor:pointer;
}

/* ================= CHATBOT ================= */

.chatbot {
    position:fixed;
    bottom:20px;
    right:20px;
    width:300px;
    background:#1e293b;
    border-radius:15px;
    box-shadow:0 10px 40px rgba(0,0,0,0.7);
    overflow:hidden;
}

.chatbot-header {
    background:#2563eb;
    padding:10px;
    display:flex;
    justify-content:space-between;
}

.chatbot-body {
    padding:10px;
    height:200px;
    overflow-y:auto;
}

.chatbot-input {
    display:flex;
}

.chatbot-input input {
    flex:1;
    padding:8px;
    border:none;
}

.chatbot-input button {
    background:#22c55e;
    border:none;
    padding:8px;
    color:white;
}

.chat-toggle {
    position:fixed;
    bottom:20px;
    right:20px;
    background:#2563eb;
    padding:12px 18px;
    border-radius:50px;
    cursor:pointer;
    display:none;
}

</style>
</head>

<body>

<div id="particles-js"></div>

<div class="theme-toggle" onclick="toggleTheme()">üåô Toggle Theme</div>

<header>
<h1>WELCOME</h1>
<p>VSMETGUD MEDIA PORTAL - Enterprise DevOps Dashboard</p>
</header>

<div class="navbar">
<button class="nav-btn" onclick="loadCategory('', this)">VIEW ALL FILES</button>
<button class="nav-btn" onclick="loadCategory('VIDEO SONGS', this)">VIDEO SONGS</button>
<button class="nav-btn" onclick="loadCategory('ShackPDFs', this)">BOOKS</button>
<button class="nav-btn" onclick="loadCategory('YOUTUBE VIDEOS-DEVOPS----------------------', this)">DEVOPS VIDEOS</button>
</div>

<div class="metrics">
<div class="metric">
<h3>CPU Usage</h3>
<div class="counter" id="cpu">0%</div>
</div>

<div class="metric">
<h3>Memory Usage</h3>
<div class="counter" id="memory">0%</div>
</div>

<div class="metric">
<h3>Pods Running</h3>
<div class="counter" id="pods">0</div>
</div>

<div class="metric">
<h3>Pod Health</h3>
<div class="counter" id="health">Healthy</div>
</div>
</div>

<div class="chatbot" id="chatbox">
<div class="chatbot-header">
<span>DevOps AI</span>
<span onclick="toggleChat()">‚ûñ</span>
</div>
<div class="chatbot-body" id="chatBody"></div>
<div class="chatbot-input">
<input id="chatInput">
<button onclick="sendMessage()">Send</button>
</div>
</div>

<div class="chat-toggle" id="chatToggle" onclick="toggleChat()">ü§ñ</div>

<script>

/* ================= CATEGORY + ACTIVE BUTTON ================= */

function loadCategory(folder, element){

    // remove active from all
    document.querySelectorAll(".nav-btn")
        .forEach(btn => btn.classList.remove("active"));

    // add active to clicked
    element.classList.add("active");

    // store active button
    localStorage.setItem("activeFolder", folder);

    // navigate
    if(folder === ''){
        window.location.href = "/media/";
    } else {
        window.location.href = "/media/" + encodeURIComponent(folder) + "/";
    }
}

/* ================= RESTORE ACTIVE AFTER RELOAD ================= */

window.addEventListener("DOMContentLoaded", function(){

    const savedFolder = localStorage.getItem("activeFolder");

    if(savedFolder !== null){
        document.querySelectorAll(".nav-btn").forEach(btn => {
            if(btn.getAttribute("onclick").includes(savedFolder)){
                btn.classList.add("active");
            }
        });
    }

});


/* ================= METRICS ================= */

function fetchMetrics(){

    let cpu = Math.floor(Math.random()*40+30);
    let mem = Math.floor(Math.random()*30+50);
    let pods = Math.floor(Math.random()*5+3);

    document.getElementById("cpu").innerText = cpu + "%";
    document.getElementById("memory").innerText = mem + "%";
    document.getElementById("pods").innerText = pods;

    if(pods < 3){
        document.getElementById("health").innerHTML =
            "Warning <span class='alert-badge'>!</span>";
    } else {
        document.getElementById("health").innerText = "Healthy";
    }
}

setInterval(fetchMetrics, 3000);
fetchMetrics();


/* ================= THEME ================= */

function toggleTheme(){
    document.body.classList.toggle("light");
}


/* ================= CHAT ================= */

function sendMessage(){
    let input = document.getElementById("chatInput");
    let body = document.getElementById("chatBody");

    body.innerHTML += "<div><b>You:</b> "+input.value+"</div>";
    body.innerHTML += "<div style='color:#22c55e;'><b>AI:</b> Monitoring stable üöÄ</div>";

    input.value="";
    body.scrollTop = body.scrollHeight;
}


/* ================= CHAT TOGGLE ================= */

function toggleChat(){
    let box = document.getElementById("chatbox");
    let toggle = document.getElementById("chatToggle");

    if(box.style.display === "none"){
        box.style.display = "block";
        toggle.style.display = "none";
    } else {
        box.style.display = "none";
        toggle.style.display = "block";
    }
}


/* ================= VOICE NAV ================= */

const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

if(SpeechRecognition){

    const recognition = new SpeechRecognition();
    recognition.lang="en-US";

    recognition.onresult = function(event){
        let speech = event.results[0][0].transcript.toLowerCase();

        document.querySelectorAll(".nav-btn").forEach(btn=>{
            if(speech.includes(btn.innerText.toLowerCase())){
                btn.click();
            }
        });
    };

    // DO NOT auto start repeatedly
    // recognition.start();  ‚Üê removed (was causing random behaviour)
}


/* ================= PARTICLES ================= */

particlesJS("particles-js",{
    particles:{
        number:{value:60},
        size:{value:3},
        move:{speed:2},
        line_linked:{enable:true,color:"#38bdf8"}
    }
});

</script>


</body>
</html>
